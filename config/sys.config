%% Copyright (C) 2026  ErlVectorDB Contributors
%%
%% This program is free software: you can redistribute it and/or modify
%% it under the terms of the GNU General Public License as published by
%% the Free Software Foundation, either version 3 of the License, or
%% (at your option) any later version.

[
    {erlvectordb, [
        % Network configuration
        {mcp_port, 8080},
        {oauth_port, 8081},
        {rest_api_port, 8082},
        {rest_api_enabled, true},
        
        % Port Management Configuration
        {port_config, #{
            mcp_server => #{
                preferred_port => 8080,
                port_range => {8080, 8090},
                bind_interface => "127.0.0.1",
                required => true,
                startup_order => 1,
                health_check_path => "/health"
            },
            oauth_server => #{
                preferred_port => 8081,
                port_range => {8081, 8091},
                bind_interface => "127.0.0.1",
                required => true,
                startup_order => 2,
                health_check_path => "/oauth/health"
            },
            rest_api_server => #{
                preferred_port => 8082,
                port_range => {8082, 8092},
                bind_interface => "127.0.0.1",
                required => true,
                startup_order => 3,
                health_check_path => "/api/health"
            }
        }},
        
        % Authentication
        {oauth_enabled, true},
        {oauth_token_endpoint, "http://localhost:8081/oauth/token"},
        {create_default_client, true},
        {default_client_id, <<"admin">>},
        {default_client_secret, <<"admin_secret_2024">>},
        {token_lifetime, 3600000},  % 1 hour in milliseconds
        {refresh_token_lifetime, 86400000},  % 24 hours in milliseconds
        
        % Clustering configuration
        {cluster_enabled, false},
        {node_name, 'erlvectordb@localhost'},
        {cluster_cookie, erlvectordb_cluster},
        {replication_factor, 2},
        {heartbeat_interval, 5000},
        
        % Compression configuration
        {compression_enabled, true},
        {compression_algorithm, quantization_8bit}, % quantization_8bit | quantization_4bit | pca_compression | zlib_compression
        
        % Storage configuration
        {max_vector_stores, 100},
        {default_index_type, flat},
        {persistence_enabled, true},
        {persistence_dir, "data"},
        {backup_dir, "backups"},
        {sync_interval, 30000},  % 30 seconds
        {auto_backup_enabled, false},
        {auto_backup_interval, 3600000}  % 1 hour
    ]},
    {kernel, [
        {logger_level, info},
        {logger, [
            {handler, default, logger_std_h,
                #{config => #{type => standard_io},
                  formatter => {logger_formatter, #{}}}}
        ]}
    ]}
].
